CREATE TABLE BSBIOS.USUARIO
  (
  Login VARCHAR2 (12) NOT NULL,
  Nome VARCHAR2 (80) NOT NULL,
  Senha VARCHAR2 (24) NULL,
  Email VARCHAR2 (241) NULL,
  Status NUMBER NOT NULL,
  Perfil NUMBER NOT NULL
 )
;
COMMENT ON COLUMN BSBIOS.USUARIO.Email IS 'E-mail utilizado para entrar em contato com o usuário'
;
COMMENT ON COLUMN BSBIOS.USUARIO.Perfil IS '1 - Comprador; 2 = Fornecedor'
;
ALTER TABLE BSBIOS.USUARIO ADD CONSTRAINT PK_USUARIO
  PRIMARY KEY (
  Login
)
 ENABLE 
 VALIDATE 
;
INSERT INTO USUARIO
(Nome, Login, Senha, Email, Perfil)
VALUES
('Administrador Fusion', 'admfusion', 'nMt6vfHriwbmCFAim+R8qw==','mauro.leal@fusionconsultoria.com.br', 1)
;
COMMIT;
CREATE TABLE BSBIOS.PRODUTO
(
    Codigo VARCHAR2(18) NOT NULL,
    Descricao VARCHAR2(40) NOT NULL,
	Tipo VARCHAR2(4) NOT NULL
)
;
ALTER TABLE BSBIOS.PRODUTO ADD CONSTRAINT PK_PRODUTO
  PRIMARY KEY (
  Codigo
)
 ENABLE 
 VALIDATE 
 ;
CREATE TABLE BSBIOS.FORNECEDOR
(
    Codigo VARCHAR2(10) NOT NULL,
    Nome VARCHAR2(35) NOT NULL,
	Email VARCHAR2(100) NULL
)
;
ALTER TABLE BSBIOS.FORNECEDOR ADD CONSTRAINT PK_FORNECEDOR
  PRIMARY KEY (
  Codigo
)
 ENABLE 
 VALIDATE 
;

--TABELA PRODUTOFORNECEDOR (INICIO)
CREATE TABLE BSBIOS.PRODUTOFORNECEDOR
(
    CodigoProduto VARCHAR2(18),
    CodigoFornecedor VARCHAR2(10)
)
;
ALTER TABLE BSBIOS.PRODUTOFORNECEDOR ADD CONSTRAINT PK_PRODUTOFORNECEDOR
PRIMARY KEY (CodigoProduto, CodigoFornecedor)
ENABLE
VALIDATE
;
ALTER TABLE BSBIOS.PRODUTOFORNECEDOR ADD CONSTRAINT FK_PRODUTOFORNECEDOR_PRODUTO
foreign KEY (CodigoProduto) REFERENCES BSBIOS.PRODUTO(Codigo)
;
ALTER TABLE BSBIOS.PRODUTOFORNECEDOR ADD CONSTRAINT FK_PRODUTOFORNECEDOR_FORNEC
foreign KEY (CodigoFornecedor) REFERENCES BSBIOS.fornecedor(Codigo)
;

--TABLEA PRODUTOFORNECEDOR (FIM)

--TABELA CONDIÇÃO DE PAGAMENTO (INICIO)
CREATE TABLE BSBIOS.CONDICAOPAGAMENTO
(
    Codigo VARCHAR2(4) NOT NULL,
    Descricao VARCHAR2(50) NOT NULL
)
;
ALTER TABLE BSBIOS.CONDICAOPAGAMENTO ADD CONSTRAINT PK_CONDICAOPAGAMENTO
  PRIMARY KEY (
  Codigo
)
 ENABLE 
 VALIDATE 
;
--TABELA CONDIÇÃO DE PAGAMENTO (FIM)

--TABELA IVA (INICIO)
CREATE TABLE BSBIOS.IVA
(
    Codigo VARCHAR2(2) NOT NULL,
    Descricao VARCHAR2(50) NOT NULL
)
;
ALTER TABLE BSBIOS.IVA ADD CONSTRAINT PK_IVA
  PRIMARY KEY (
  Codigo
)
 ENABLE 
 VALIDATE ;
--TABELA IVA (FIM)

--INCOTERM (INICIO)

  CREATE TABLE "INCOTERM" 
   (	"CODIGO" VARCHAR2(3 BYTE) NOT NULL ENABLE, 
	"DESCRICAO" VARCHAR2(30 BYTE) NOT NULL ENABLE, 
	 CONSTRAINT "PK_INCOTERM" PRIMARY KEY ("CODIGO")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;

--INCOTERM (FIM)

--REQUISICAO DE COMPRA (INICIO)
CREATE TABLE REQUISICAOCOMPRA 
(
  ID NUMBER NOT NULL 
, NUMERO VARCHAR2(10) NOT NULL 
, NUMEROITEM VARCHAR2(5) NOT NULL 
, LOGINCRIADOR VARCHAR2(12) NOT NULL 
, REQUISITANTE VARCHAR2(12) NULL 
, CODIGOFORNECEDORPRETENDIDO VARCHAR2(20) NULL 
, DESCRICAO VARCHAR2(40) NOT NULL 
, CODIGOMATERIAL VARCHAR2(18) NOT NULL 
, QUANTIDADE NUMBER(13, 3) NOT NULL 
, UNIDADEMEDIDA VARCHAR2(3) NOT NULL 
, CENTRO VARCHAR2(4) NOT NULL 
, DATASOLICITACAO DATE NOT NULL 
, DATALIBERACAO DATE NOT NULL 
, DATAREMESSA DATE NOT NULL 
, CONSTRAINT PK_REQUISICAODECOMPRA PRIMARY KEY 
  (
    ID 
  )
  ENABLE 
);

ALTER TABLE REQUISICAOCOMPRA
ADD CONSTRAINT UK_REQUISICAODECOMPRA UNIQUE 
(
  NUMERO 
, NUMEROITEM 
)
ENABLE;

ALTER TABLE REQUISICAOCOMPRA
ADD CONSTRAINT FK_REQCOMPRA_CRIADOR FOREIGN KEY
(
  LOGINCRIADOR 
)
REFERENCES USUARIO
(
  LOGIN 
)
ENABLE;

ALTER TABLE REQUISICAOCOMPRA
ADD CONSTRAINT FK_REQCOMPRA_FORNEC FOREIGN KEY
(
  CODIGOFORNECEDORPRETENDIDO 
)
REFERENCES FORNECEDOR
(
  CODIGO 
)
ENABLE;

ALTER TABLE REQUISICAOCOMPRA
ADD CONSTRAINT FK_REQCOMPRA_MATERIAL FOREIGN KEY
(
  CODIGOMATERIAL 
)
REFERENCES PRODUTO
(
  CODIGO 
)
ENABLE;

COMMENT ON COLUMN REQUISICAOCOMPRA.ID IS 'Chave da Tabela';

COMMENT ON COLUMN REQUISICAOCOMPRA.LOGINCRIADOR IS 'Usuario que criou a Requisicao';

COMMENT ON COLUMN REQUISICAOCOMPRA.LOGINREQUISITANTE IS 'Usuario que fez a requisicao';

CREATE SEQUENCE REQUISICAOCOMPRA_ID_SEQUENCE INCREMENT BY 1 START WITH 1;
--REQUISICAO DE COMPRA (FIM)

--PROCESSO DE COTACAO (INICIO )

CREATE TABLE "BSBIOS"."PROCESSOCOTACAO" 
   ("ID" NUMBER NOT NULL ENABLE, 
	"DATALIMITERETORNO" DATE, 
	"STATUS" NUMBER NOT NULL ENABLE, 
	"CODIGOPRODUTO" VARCHAR2(18 BYTE) NOT NULL ENABLE, 
	"QUANTIDADE" NUMBER(13,3) NOT NULL ENABLE, 
	 CONSTRAINT "PK_PROCESSOCOTACAO" PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE, 
	 CONSTRAINT "FK_PROCESSOCOTACAO_PRODUTO" FOREIGN KEY ("CODIGOPRODUTO")
	  REFERENCES "BSBIOS"."PRODUTO" ("CODIGO") ENABLE
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
  
 --PROCESSO DE COTACAO (FIM)
 
 --PROCESSO DE COTAÇÃO DE MATERIAL (INICIO)
 
  CREATE TABLE "BSBIOS"."PROCESSOCOTACAOMATERIAL" 
   (	"ID" NUMBER NOT NULL ENABLE, 
	"IDREQUISICAOCOMPRA" NUMBER NOT NULL ENABLE, 
	 CONSTRAINT "PROCESSOCOTACAOMATERIAL_PK" PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE, 
	 CONSTRAINT "FK_PROCESSOMATERIAL_PROCESSO" FOREIGN KEY ("ID")
	  REFERENCES "BSBIOS"."PROCESSOCOTACAO" ("ID") ENABLE
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
  
  CREATE SEQUENCE PROCESSOCOTACAO_ID_SEQUENCE INCREMENT BY 1 START WITH 1;
  
 
 --PROCESSO DE COTAÇÃO DE MATERIAL (FIM)



